{% extends 'base.html.twig' %}

{% block title %}Inscription - TuniGo{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ asset('styles/register.css') }}" rel="stylesheet">
{% endblock %}

{% block body %}
<div class="register-container">
    <div class="register-header">
        <i class="fas fa-bus logo-icon"></i>
        <h1>Créer un compte TuniGo</h1>
        <p>Rejoignez notre plateforme de transport en Tunisie</p>
    </div>
    
    <div class="register-body">
        {{ form_start(registrationForm) }}
            <div class="floating-form">
                <h2>Inscription</h2>
                
                <div class="form-row">
                    <div class="form-col">
                        <div class="floating-input-container">
                            {{ form_widget(registrationForm.nomUtilisateur, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                            <label for="{{ registrationForm.nomUtilisateur.vars.id }}" class="floating-label">Nom</label>
                            {{ form_errors(registrationForm.nomUtilisateur) }}
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="floating-input-container">
                            {{ form_widget(registrationForm.prenomUtilisateur, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                            <label for="{{ registrationForm.prenomUtilisateur.vars.id }}" class="floating-label">Prénom</label>
                            {{ form_errors(registrationForm.prenomUtilisateur) }}
                        </div>
                    </div>
                </div>
                
                <div class="floating-input-container">
                    {{ form_widget(registrationForm.emailUtilisateur, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                    <label for="{{ registrationForm.emailUtilisateur.vars.id }}" class="floating-label">Email</label>
                    {{ form_errors(registrationForm.emailUtilisateur) }}
                </div>
                
                <div class="floating-input-container">
                    {{ form_widget(registrationForm.numeroTelephoneUtilisateur, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                    <label for="{{ registrationForm.numeroTelephoneUtilisateur.vars.id }}" class="floating-label">Numéro de téléphone</label>
                    {{ form_errors(registrationForm.numeroTelephoneUtilisateur) }}
                </div>

                <div class="select-container">
                    <select name="{{ registrationForm.questionSecurite.vars.full_name }}" id="{{ registrationForm.questionSecurite.vars.id }}" class="form-select">
                        <option value="">Choisissez une question de sécurité</option>
                        <option value="Quel est le nom de votre premier animal de compagnie ?">Quel est le nom de votre premier animal de compagnie ?</option>
                        <option value="Dans quelle ville êtes-vous né(e) ?">Dans quelle ville êtes-vous né(e) ?</option>
                        <option value="Quel est le nom de votre école primaire ?">Quel est le nom de votre école primaire ?</option>
                    </select>
                    {{ form_errors(registrationForm.questionSecurite) }}
                </div>

                <div class="floating-input-container">
                    {{ form_widget(registrationForm.reponseSecurite, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                    <label for="{{ registrationForm.reponseSecurite.vars.id }}" class="floating-label">Réponse</label>
                    {{ form_errors(registrationForm.reponseSecurite) }}
                </div>

                <div class="form-row password-row">
                    <div class="form-col">
                        <div class="floating-input-container">
                            <div class="password-field">
                                {{ form_widget(registrationForm.plainPassword.first, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                                <label for="{{ registrationForm.plainPassword.first.vars.id }}" class="floating-label">Mot de passe</label>
                                <span class="toggle-password" onclick="togglePasswordVisibility(this)">
                                    <i class="fas fa-eye-slash"></i>
                                </span>
                            </div>
                            {{ form_errors(registrationForm.plainPassword.first) }}
                        </div>
                    </div>
                    <div class="form-col">
                        <div class="floating-input-container">
                            <div class="password-field">
                                {{ form_widget(registrationForm.plainPassword.second, {'attr': {'class': 'floating-input', 'placeholder': ' '}}) }}
                                <label for="{{ registrationForm.plainPassword.second.vars.id }}" class="floating-label">Confirmer</label>
                                <span class="toggle-password" onclick="togglePasswordVisibility(this)">
                                    <i class="fas fa-eye-slash"></i>
                                </span>
                            </div>
                            {{ form_errors(registrationForm.plainPassword.second) }}
                        </div>
                    </div>
                </div>

                <div class="form-group terms-group">
                    <div class="form-check">
                        {{ form_widget(registrationForm.agreeTerms, {'attr': {'class': 'form-check-input'}}) }}
                        {{ form_label(registrationForm.agreeTerms, "J'accepte les conditions d'utilisation", {'label_attr': {'class': 'form-check-label'}}) }}
                    </div>
                    {{ form_errors(registrationForm.agreeTerms) }}
                </div>

                <button type="submit" class="btn-primary">
                    <i class="fas fa-user-plus"></i> Créer mon compte
                </button>
            </div>
            
            {{ form_widget(registrationForm.questionSecurite, {'attr': {'style': 'display: none'}}) }}
        {{ form_end(registrationForm, {'render_rest': false}) }}

        <div class="login-link">
            <p>Déjà inscrit ? <a href="{{ path('app_login') }}">Se connecter</a></p>
        </div>
    </div>
</div>

{% block javascripts %}
<script>
function togglePasswordVisibility(element) {
    const passwordField = element.parentElement.querySelector('input');
    const eyeIcon = element.querySelector('i');
    
    if (passwordField.type === 'password') {
        passwordField.type = 'text';
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
    } else {
        passwordField.type = 'password';
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
    }
}
</script>
{% endblock %}
{% endblock %} 