<form id="delete-form" method="post" action="{{ path('app_reservation_delete', {'idRes': reservation.idRes}) }}">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ reservation.idRes) }}">
    <button type="button" class="btn" onclick="confirmDelete()"><i class="fas fa-trash"></i></button>
</form>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.1/dist/sweetalert2.all.min.js"></script>
<script>
  function confirmDelete() {
    // Génère un code de confirmation unique (par exemple, un code aléatoire)
    const confirmationCode = Math.random().toString(36).substring(2, 8).toUpperCase();

    Swal.fire({
        title: 'Are you sure you want to delete this?',
        text: "To confirm, please enter the code: " + confirmationCode,
        icon: 'warning',
        input: 'text',
        inputPlaceholder: 'Enter the confirmation code',
        showCancelButton: true,
        confirmButtonText: 'Confirm Deletion',
        cancelButtonText: 'Cancel',
        reverseButtons: true
    }).then((result) => {
        if (result.isConfirmed) {
            if (result.value === confirmationCode) {
                // Si le code de confirmation est correct, soumettre le formulaire
                document.getElementById('delete-form').submit();
            } else {
                Swal.fire('Incorrect code', 'The confirmation code is incorrect. Deletion canceled.', 'error');
            }
        }
    });
}

</script>
