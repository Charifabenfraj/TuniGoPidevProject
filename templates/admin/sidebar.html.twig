{% block stylesheets %}
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="{{ asset('styles/admin.css') }}" rel="stylesheet">
{% endblock %}


<div class="sidebar">
    <div class="sidebar-header">
        <div class="sidebar-brand">
            <i class="fas fa-bus"></i>
            <span>TuniGo Admin</span>
        </div>
    </div>
    
    <ul class="sidebar-menu">
        <!-- Tableau de bord -->
        <li class="sidebar-item">
            <a href="{{ path('app_admin_dashboard') }}" class="sidebar-link {% if app.request.get('_route') == 'app_admin_dashboard' %}active{% endif %}">
                <i class="fas fa-tachometer-alt"></i>
                <span>Tableau de bord</span>
            </a>
        </li>
        
        <div class="sidebar-divider"></div>
        
        <!-- Gestion Utilisateurs -->
        <li class="sidebar-item">
            <a href="{{ path('app_utilisateur_index') }}" class="sidebar-link {% if app.request.get('_route') starts with 'app_utilisateur_' %}active{% endif %}">
                <i class="fas fa-users"></i>
                <span>Gestion Utilisateurs</span>
            </a>
        </li>
        
        <!-- Gestion Transport (Collapsible) -->
        <li class="sidebar-item">
            <a href="#" class="sidebar-link" id="transport-toggle">
                <i class="fas fa-subway"></i>
                <span>Gestion Transport</span>
                <i class="fas fa-chevron-down" id="toggle-icon"></i>
            </a>
            <ul class="sidebar-submenu" id="transport-menu" style="display: none;">
                <li class="sidebar-subitem">
                    <a href="{{ path('app_taxi_index') }}" class="sidebar-link {% if app.request.get('_route') == 'app_taxi_index' %}active{% endif %}">
                        <i class="fas fa-taxi"></i>
                        <span>Gestion Taxi</span>
                    </a>
                </li>
                <li class="sidebar-subitem">
                    <a href="{{ path('app_bus_index') }}" class="sidebar-link {% if app.request.get('_route') == 'app_bus_index' %}active{% endif %}">
                        <i class="fas fa-bus"></i>
                        <span>Gestion Bus</span>
                    </a>
                </li>
                <li class="sidebar-subitem">
                    <a href="{{ path('app_scooter_index') }}" class="sidebar-link {% if app.request.get('_route') == 'app_scooter_index' %}active{% endif %}">
                    <i class="fas fa-motorcycle"></i>
                        <span>Gestion Scooter</span>
                    </a>
                </li>
                <li class="sidebar-subitem">
                    <a href="{{ path('app_train_index') }}" class="sidebar-link {% if app.request.get('_route') == 'app_train_index' %}active{% endif %}">
                        <i class="fas fa-train"></i>
                        <span>Gestion Train</span>
                    </a>
                </li>
                <li class="sidebar-subitem">
                    <a href="{{ path('app_metro_index') }}" class="sidebar-link {% if app.request.get('_route') == 'app_metro_index' %}active{% endif %}">
                        <i class="fas fa-subway"></i>
                        <span>Gestion Metro</span>
                    </a>
                </li>
            </ul>
        </li>
        
        <!-- Gestion Trajets -->
<li class="sidebar-item">
    <a href="#" class="sidebar-link" id="trajet-toggle">
        <i class="fas fa-route"></i>
        <span>Gestion Trajets</span>
        <i class="fas fa-chevron-down" id="trajet-toggle-icon"></i>
    </a>
    <ul class="sidebar-submenu" id="trajet-menu" style="display: none;">
        <li class="sidebar-subitem">
            <a href="{{ path('app_bus_trajet_index') }}" class="sidebar-link {% if app.request.get('_route') starts with 'app_bus_trajet_' %}active{% endif %}">
                <i class="fas fa-bus"></i>
                <span>Trajets Bus</span>
            </a>
        </li>
        <li class="sidebar-subitem">
            <a href="{{ path('app_metro_trajet_index') }}" class="sidebar-link {% if app.request.get('_route') starts with 'app_metro_trajet_' %}active{% endif %}">
                <i class="fas fa-subway"></i>
                <span>Trajets Métro</span>
            </a>
        </li>
        <li class="sidebar-subitem">
            <a href="{{ path('app_train_trajet_index') }}" class="sidebar-link {% if app.request.get('_route') starts with 'app_train_trajet_' %}active{% endif %}">
                <i class="fas fa-train"></i>
                <span>Trajets Train</span>
            </a>
        </li>
    </ul>
</li>
        
        <!-- Gestion Réservations -->
        <li class="sidebar-item">
            <a href="#" class="sidebar-link {% if app.request.get('_route') == 'app_reservation_index' %}active{% endif %}">
                <i class="fas fa-calendar-check"></i>
                <span>Gestion Réservations</span>
            </a>
        </li>
        
        <!-- Gestion Réclamations -->
        <li class="sidebar-item">
            <a href="{{ path('app_reclamation_index') }}" class="sidebar-link {% if app.request.get('_route') == 'app_reclamation_index' %}active{% endif %}">
                <i class="fas fa-exclamation-circle"></i>
                <span>Gestion Réclamations</span>
            </a>
        </li>
        
        <!-- Gestion Parking -->
        <li class="sidebar-item">
            <a href="#" class="sidebar-link {% if app.request.get('_route') == 'app_parking_index' %}active{% endif %}">
                <i class="fas fa-parking"></i>
                <span>Gestion Parking</span>
            </a>
        </li>
        
        <div class="sidebar-divider"></div>
        

        <div class="sidebar-divider"></div>
        
        <!-- Déconnexion -->
        <li class="sidebar-item">
            <a href="{{ path('app_logout') }}" class="sidebar-link">
                <i class="fas fa-sign-out-alt"></i>
                <span>Se déconnecter</span>
            </a>
        </li>
    </ul>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var transportToggle = document.getElementById("transport-toggle");
        var transportMenu = document.getElementById("transport-menu");
        var toggleIcon = document.getElementById("toggle-icon");

        // Vérifie si un sous-menu est déjà actif au chargement de la page
        var activeLink = document.querySelector('.sidebar-submenu .active');
        if (activeLink) {
            transportMenu.style.display = 'block'; // Affiche le menu si un lien est actif
            toggleIcon.classList.replace('fa-chevron-down', 'fa-chevron-up');
        }

        // Ajoute un événement au clic sur "Gestion Transport"
        transportToggle.addEventListener("click", function() {
            // Vérifie l'état du menu (affiché ou non)
            if (transportMenu.style.display === "none") {
                transportMenu.style.display = "block"; // Affiche le menu
                toggleIcon.classList.replace("fa-chevron-down", "fa-chevron-up"); // Change l'icône
            } else {
                transportMenu.style.display = "none"; // Cache le menu
                toggleIcon.classList.replace("fa-chevron-up", "fa-chevron-down"); // Change l'icône
            }
        });

        var trajetToggle = document.getElementById("trajet-toggle");
        var trajetMenu = document.getElementById("trajet-menu");
        var trajetToggleIcon = document.getElementById("trajet-toggle-icon");

        // Vérifie si un sous-menu est déjà actif au chargement de la page
        var activeLink = document.querySelector('#trajet-menu .active');
        if (activeLink) {
            trajetMenu.style.display = 'block'; // Affiche le menu si un lien est actif
            trajetToggleIcon.classList.replace('fa-chevron-down', 'fa-chevron-up');
        }

        // Ajoute un événement au clic sur "Gestion Trajets"
        trajetToggle.addEventListener("click", function() {
            // Vérifie l'état du menu (affiché ou non)
            if (trajetMenu.style.display === "none") {
                trajetMenu.style.display = "block"; // Affiche le menu
                trajetToggleIcon.classList.replace("fa-chevron-down", "fa-chevron-up"); // Change l'icône
            } else {
                trajetMenu.style.display = "none"; // Cache le menu
                trajetToggleIcon.classList.replace("fa-chevron-up", "fa-chevron-down"); // Change l'icône
            }
        });
    });
</script>

<style>
.sidebar-submenu {
    display: none;
    padding-left: 20px;
}

.sidebar-submenu.active {
    display: block;
}
</style>
