{% extends 'front/basefront.html.twig' %}

{% block title %} Service - TuniGo {% endblock %}


{% block body %}
<div class="header-carousel">
        <div id="carouselId" class="carousel slide" data-bs-ride="carousel" data-bs-interval="false">
            <ol class="carousel-indicators">
                <li data-bs-target="#carouselId" data-bs-slide-to="0" class="active" aria-current="true" aria-label="First slide"></li>
                <li data-bs-target="#carouselId" data-bs-slide-to="1" aria-label="Second slide"></li>
            </ol>
            <div class="carousel-inner" role="listbox">
               +
                <div class="carousel-item active">
                    <img src="{{ asset('aassetsFront/img/carousel-2.jpg') }}" class="img-fluid w-100" alt="First slide" />
                    <div class="carousel-caption">
                        <div class="container py-4">
                            <div class="row g-5">
                                <div class="col-lg-6 fadeInLeft animated" style="animation-delay: 1s;">
                                    <div class="bg-secondary rounded p-5">
                                        <h4 class="text-white mb-4">CONTINUE RESERVATION TRAIN</h4>
                                        
                                        <!-- Formulaire de réservation -->
                                        
                                        <form method="POST" action="{{ path('front_reservation') }}">
                                            <div class="row g-3">
                                                <!-- Type de transport -->
                                                <div class="col-12">
                                                    <label class="form-label text-white">Type de transport</label>
                                                    <select class="form-select" name="type" id="typeMoyenTransport" onchange="updateNumeroOptions()">
                                                        <option selected disabled>Choisissez un moyen</option>
                                                        <option value="bus">Bus</option>
                                                        <option value="metro">Métro</option>
                                                        <option value="train">Train</option>
                                                    </select>
                                                </div>

                                                <!-- Numéro du moyen -->
                                                <div class="col-12">
                                                    <label class="form-label text-white">Numéro</label>
                                                    <select class="form-select" name="moyen" id="moyenComboBox">
                                                        <option selected disabled>Sélectionnez un numéro</option>
                                                    </select>
                                                </div>

                                                <!-- Champ utilisateur -->
                                                <div class="col-12">
                                                    <div class="input-group">
                                                        <div class="d-flex align-items-center bg-light text-body rounded-start p-2">
                                                            <span class="fas fa-user"></span> <span class="ms-1">Utilisateur</span>
                                                        </div>
                                                        <input class="form-control" type="text" id="nomUtilisateurField" value="{{ app.user.prenomUtilisateur ~ ' ' ~ app.user.nomUtilisateur }}" readonly>
                                                    </div>
                                                </div>

                                                <!-- Date de réservation -->
                                                <div class="col-12">
                                                    <div class="input-group">
                                                        <div class="d-flex align-items-center bg-light text-body rounded-start p-2">
                                                            <span class="fas fa-calendar-alt"></span><span class="ms-1">Date de réservation</span>
                                                        </div>
                                                        <input class="form-control" type="date" name="date" id="dateResPicker">
                                                    </div>
                                                </div>

                                                <!-- Moyen de paiement -->
                                                <div class="col-12">
                                                    <select class="form-select" name="paiement" id="moyenPaiementComboBox">
                                                        <option selected disabled>Sélectionnez le moyen de paiement</option>
                                                        <option value="Carte">Carte</option>
                                                        <option value="Espèces">Espèces</option>
                                                    </select>
                                                </div>

                                                <!-- Bouton -->
                                                <div class="col-12">
                                                    <button class="btn btn-primary w-100 py-2" id="reservationButton">Réserver</button>
                                                </div>
                                            </div>
                                        </form>
                                        
                                        <!-- Fin du formulaire -->
                                    </div>
                                </div>

                                <!-- Image / texte droite -->
                                <div class="col-lg-6 d-none d-lg-flex fadeInRight animated" style="animation-delay: 1s;">
                                    <div class="text-start">
                                        <h1 class="display-5 text-white">Get 15% off your rental Plan your trip now</h1>
                                        <p>Treat yourself in USA</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Deuxième slide (si nécessaire, tu peux ajouter plus de slides ici) -->
            </div>
        </div>
    </div>
    
{% endblock %}
   

    


{% block javascripts %}
    <script>
      
function updateNumeroOptions() {
    const type = document.getElementById("typeMoyenTransport").value;
    const numeroSelect = document.getElementById("moyenComboBox");

    // Vider les options actuelles
    numeroSelect.innerHTML = '<option selected disabled>Sélectionnez un numéro</option>';

    // Appeler l'API pour récupérer les numéros selon le type
    fetch(`/api/numeros?type=${type}`)
        .then(response => response.json())
        .then(data => {
            data.forEach(numero => {
                const option = document.createElement("option");
                option.value = numero;
                option.textContent = numero;
                numeroSelect.appendChild(option);
            });
        })
        .catch(error => {
            console.error('Erreur lors du chargement des numéros :', error);
        });
}
</script>

   
{% endblock %}
