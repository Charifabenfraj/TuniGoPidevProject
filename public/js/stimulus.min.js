/*
Stimulus 3.2.2
Copyright Â© 2023 Basecamp, LLC
 */
(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=typeof globalThis!=="undefined"?globalThis:global||self,factory(global.Stimulus={}))})(this,(function(exports){"use strict";class Application{constructor(element=document.documentElement,schema=defaultSchema){this.logger=console;this.debug=false;this.logDebugActivity=false;this.element=element;this.schema=schema;this.tokens=new TokenListObserver(this.element,this.schema.controllerAttribute,this);this.modules=new ModuleMap;this.connectors=new Multimap;this.router=new Router(this);this.actionDescriptorFilters={stop:[],prevent:[]}}static start(element,schema){const application=new this(element,schema);application.start();return application}async start(){await domReady();this.logDebugActivity&&this.logger.log("application start");this.router.start();this.tokens.start()}stop(){this.logger.log("application stop");this.router.stop();this.tokens.stop()}registerModule(identifier,controllerConstructor){this.modules.set(identifier,controllerConstructor);this.router.refresh(identifier)}registerActionOption(name,filter){var _a;const filters=this.actionDescriptorFilters[name]||[];(_a=this.actionDescriptorFilters)[name]||((_a)[name]=[]);filters.push(filter)}registerConnector(connector){this.connectors.add(connector.origin,connector);this.router.refresh(connector.identifier)}unregisterConnector(connector){this.connectors.delete(connector.origin,connector);this.router.refresh(connector.identifier)}get controllers(){return this.router.contexts.map(context=>context.controller)}getControllerForElementAndIdentifier(element,identifier){const context=this.router.getContextForElementAndIdentifier(element,identifier);return context&&context.controller}handleError(error,message,detail={}){var _a;this.logger.warn(`%s\n\n%o\n\n%o`,message,error,detail);(_a=window.onerror)===null||_a===void 0||(_a).call(window,message,"",-1,-1,error)}debug_logCurrentFocus(){var _a,_b;(_b=(_a=this.element)===null||_a===void 0?void 0:(_a).ownerDocument)===null||_b===void 0||(_b).addEventListener("focusin",event=>{console.log("FOCUSIN",event.target)},{once:true})}}function domReady(){return new Promise(resolve=>{if(document.readyState!=="loading"){resolve()}else{document.addEventListener("DOMContentLoaded",()=>resolve())}})}const defaultSchema={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:identifier=>`data-${identifier}-target`,outletAttributeForScope:identifier=>`data-${identifier}-outlet`,keyAttributeForScope:identifier=>`data-${identifier}-key`,actionDescriptorFilters:{stop:[],prevent:[]}};class Context{constructor(module,scope){this.logDebugActivity=false;this.module=module;this.scope=scope;this.controller=new module.controllerConstructor(this);this.bindingObserver=new BindingObserver(this,this.dispatcher);this.valueObserver=new ValueObserver(this,this.controller);this.targetObserver=new TargetObserver(this,this);try{this.controller.initialize()}catch(error){this.handleError(error,"initializing controller")}}connect(){this.logDebugActivity&&this.log("connect");try{this.controller.connect()}catch(error){this.handleError(error,"connecting controller")}thisBind({name:"stimulus-connect",identifier:this.identifier,eventTarget:this.element})}disconnect(){this.logDebugActivity&&this.log("disconnect");try{this.unbind();this.controller.disconnect()}catch(error){this.handleError(error,"disconnecting controller")}}bindTargets(){this.targetObserver&&this.targetObserver.start()}unbindTargets(){this.targetObserver&&this.targetObserver.stop()}bindOutlets(){this.outletObserver&&this.outletObserver.start()}unbindOutlets(){this.outletObserver&&this.outletObserver.stop()}application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application().schema}get dispatcher(){return this.application().router.currentDispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(error,message,detail={}){const{identifier,controller,element}=this;detail={identifier,controller,element,...detail};this.application().handleError(error,`Error ${message}`,detail)}targetConnected(element,name){this.invokeControllerMethod(`${name}TargetConnected`,element)}targetDisconnected(element,name){this.invokeControllerMethod(`${name}TargetDisconnected`,element)}outletConnected(outlet,element,name){this.invokeControllerMethod(`${nameOfOutlet(name)}OutletConnected`,outlet,element)}outletDisconnected(outlet,element,name){this.invokeControllerMethod(`${nameOfOutlet(name)}OutletDisconnected`,outlet,element)}invokeControllerMethod(methodName,...args){const controller=this.controller;if(typeof controller[methodName]==="function"){controller[methodName](...args)}}}function nameOfOutlet(name){return camelize(name.slice(0,-7))}/* @stimulusjs/core 2021 */
(function(){if(!Array.prototype.some){Array.prototype.some=function(callbackfn,thisArg){var t=Object(this),len=t.length>>>0,i=0;for(i;i<len;i++){if(i in t&&callbackfn.call(thisArg,t[i],i,t)){return true}}return false}}})();

// This is a placeholder minimal implementation to make the app work
document.addEventListener('DOMContentLoaded', () => {
  console.log('Stimulus loaded (placeholder version)');
  
  // Initialize any Stimulus controllers on the page
  const app = new Application();
  app.start();
  
  // Make Stimulus available globally
  window.Stimulus = exports;
}); 